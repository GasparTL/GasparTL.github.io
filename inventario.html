<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Registro de Inventario</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
    }
    h1 {
        text-align: center;
    }
    form {
        max-width: 400px;
        margin: 0 auto;
    }
    input[type="text"], input[type="number"], input[type="date"] {
        width: 100%;
        padding: 8px;
        margin: 5px 0;
        box-sizing: border-box;
    }
    input[type="submit"] {
        width: 100%;
        padding: 10px;
        margin-top: 10px;
        background-color: #4CAF50;
        color: white;
        border: none;
        cursor: pointer;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    .btn {
        background-color: #f44336;
        color: white;
        border: none;
        padding: 5px 10px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        margin: 4px 2px;
        cursor: pointer;
        border-radius: 5px;
    }
</style>
</head>
<body>
    <h1>Registro de Inventario</h1>
    <form id="inventarioForm">
        <label for="producto">Producto:</label>
        <input type="text" id="producto" name="producto" required><br>
        <label for="cantidad">Cantidad:</label>
        <input type="number" id="cantidad" name="cantidad" required><br>
        <label for="precioOriginal">Precio Original:</label>
        <input type="number" id="precioOriginal" name="precioOriginal" step="0.01" required><br>
        <label for="precioVenta">Precio Venta:</label>
        <input type="number" id="precioVenta" name="precioVenta" step="0.01" required><br>
        <label for="fecha">Fecha:</label>
        <input type="date" id="fecha" name="fecha" required><br>
        <input type="submit" value="Agregar Producto">
    </form>
    <table id="tablaInventario">
        <tr>
            <th>Producto</th>
            <th>Cantidad</th>
            <th>Precio Original</th>
            <th>Precio Venta</th>
            <th>Fecha</th>
            <th>Total Inversión</th>
            <th>Acciones</th>
        </tr>
    </table>

    <button onclick="borrarInventario()" class="btn">Borrar Inventario</button>

    <script>
        const inventarioForm = document.getElementById('inventarioForm');
        const tablaInventario = document.getElementById('tablaInventario');

        inventarioForm.addEventListener('submit', function(e) {
            e.preventDefault();

            const producto = document.getElementById('producto').value;
            const cantidad = parseInt(document.getElementById('cantidad').value);
            const precioOriginal = parseFloat(document.getElementById('precioOriginal').value);
            const precioVenta = parseFloat(document.getElementById('precioVenta').value);
            const fecha = document.getElementById('fecha').value;

            const totalInversion = cantidad * precioOriginal;

            const fila = `<tr>
                            <td>${producto}</td>
                            <td>${cantidad}</td>
                            <td>${precioOriginal.toFixed(2)}</td>
                            <td>${precioVenta.toFixed(2)}</td>
                            <td>${fecha}</td>
                            <td>${totalInversion.toFixed(2)}</td>
                            <td><button onclick="editarProducto(this)" class="btn">Editar</button> <button onclick="borrarProducto(this)" class="btn">Borrar</button></td>
                         </tr>`;

            tablaInventario.innerHTML += fila;

            // Guardar en localStorage
            const inventario = JSON.parse(localStorage.getItem('inventario')) || [];
            inventario.push({ producto, cantidad, precioOriginal, precioVenta, fecha, totalInversion });
            localStorage.setItem('inventario', JSON.stringify(inventario));

            // Limpiar formulario
            inventarioForm.reset();
        });

        // Cargar datos del localStorage al cargar la página
        window.onload = function() {
            const inventario = JSON.parse(localStorage.getItem('inventario')) || [];
            inventario.forEach(item => {
                const fila = `<tr>
                                <td>${item.producto}</td>
                                <td>${item.cantidad}</td>
                                <td>${item.precioOriginal.toFixed(2)}</td>
                                <td>${item.precioVenta.toFixed(2)}</td>
                                <td>${item.fecha}</td>
                                <td>${item.totalInversion.toFixed(2)}</td>
                                <td><button onclick="editarProducto(this)" class="btn">Editar</button> <button onclick="borrarProducto(this)" class="btn">Borrar</button></td>
                             </tr>`;
                tablaInventario.innerHTML += fila;
            });
        };

        function editarProducto(row) {
            const tr = row.parentElement.parentElement;
            const cells = tr.querySelectorAll('td');

            const producto = cells[0].textContent;
            const cantidad = cells[1].textContent;
            const precioOriginal = cells[2].textContent;
            const precioVenta = cells[3].textContent;
            const fecha = cells[4].textContent;

            document.getElementById('producto').value = producto;
            document.getElementById('cantidad').value = cantidad;
            document.getElementById('precioOriginal').value = precioOriginal;
            document.getElementById('precioVenta').value = precioVenta;
            document.getElementById('fecha').value = fecha;

            tr.remove(); // Eliminar la fila actual

            // Eliminar el producto del localStorage
            const inventario = JSON.parse(localStorage.getItem('inventario'));
            const index = inventario.findIndex(item => item.producto === producto);
            inventario.splice(index, 1);
            localStorage.setItem('inventario', JSON.stringify(inventario));
        }

        function borrarProducto(row) {
            const tr = row.parentElement.parentElement;
            const producto = tr.querySelector('td').textContent;

            tr.remove(); // Eliminar la fila actual

            // Eliminar el producto del localStorage
            const inventario = JSON.parse(localStorage.getItem('inventario'));
            const index = inventario.findIndex(item => item.producto === producto);
            inventario.splice(index, 1);
            localStorage.setItem('inventario', JSON.stringify(inventario));
        }

        function borrarInventario() {
            localStorage.removeItem('inventario');
            tablaInventario.innerHTML = '<tr><th>Producto</th><th>Cantidad</th><th>Precio Original</th><th>Precio Venta</th><th>Fecha</th><th>Total Inversión</th><th>Acciones</th></tr>';
        }
    </script>
</body>
</html>
